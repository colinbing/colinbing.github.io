{
"$schema": "https://json-schema.org/draft/2020-12/schema",
"title": "cpv.typing.sniffers",
"version": "1.0",
"order": ["date","currency","integer","rate","string"],
"scoring": {
"exact_match": 0.7,
"regex_match": 0.5,
"platform_hint": 0.1,
"value_type_evidence": 0.2,
"contradiction_penalty": -0.3,
"clip_min": 0.0,
"clip_max": 1.0
},
"thresholds": {
"auto_map": 0.85,
"suggest": 0.60
},
"rules": {
"date": [
{ "pattern": "^\\d{4}-\\d{2}-\\d{2}(?:[ T]\\d{2}:\\d{2}:\\d{2})?$", "score": 0.90, "transform": "to_date_iso" },
{ "pattern": "^\\d{1,2}/\\d{1,2}/\\d{2,4}$", "score": 0.85, "transform": "to_date_mdy_ambiguous" },
{ "pattern": "^\\d{4}-\\d{2}$", "score": 0.70, "transform": "to_date_month_floor" },
{ "pattern": "^\\d{8}$", "score": 0.70, "transform": "to_date_yyyymmdd" }
],
"currency": [
{ "pattern": "^[\\$€£¥]\\s?\\d{1,3}(?:[ ,]\\d{3})*(?:\\.\\d+)?$", "score": 0.90, "transform": "money_to_number" },
{ "pattern": "^\\(?[\\$€£¥]?\\d{1,3}(?:,\\d{3})*(?:\\.\\d+)?\\)?$", "score": 0.85, "transform": "paren_negative_money" },
{ "pattern": "^\\d+(?:\\.\\d+)?\\s?(USD|EUR|GBP|JPY|CAD|AUD)$", "score": 0.80, "transform": "iso_money_to_number" }
],
"integer": [
{ "pattern": "^-?\\d{1,3}(?:,\\d{3})*$", "score": 0.80, "transform": "to_int" },
{ "pattern": "^-?\\d+$", "score": 0.75, "transform": "to_int" }
],
"rate": [
{ "pattern": "^-?\\d+(?:\\.\\d+)?%$", "score": 0.90, "transform": "percent_to_fraction" },
{ "pattern": "^(0(?:\\.\\d+)?|1(?:\\.0+)?)$", "score": 0.70, "transform": "unit_interval_rate" }
],
"string": [ { "pattern": ".*", "score": 0.10, "transform": "identity" } ]
},
"coercions": {
"thousands_separators": [",", " "],
"decimal_separator": ".",
"paren_negative": true,
"trim_whitespace": true,
"strip_unicode_quotes": true
}
}