{
"$schema": "https://json-schema.org/draft/2020-12/schema",
"title": "canonical.record",
"type": "object",
"additionalProperties": false,
"properties": {
"date": { "type": "string", "pattern": "^\\d{4}-\\d{2}-\\d{2}$", "description": "Local dataset date (TZ-normalized)" },
"channel": { "type": "string", "enum": ["display","video","social","search","audio","native","email","other"] },
"campaign_id": { "type": "string" },
"campaign_name": { "type": "string" },
"adgroup_id": { "type": "string" },
"adgroup_name": { "type": "string" },
"creative_id": { "type": "string" },
"creative_name": { "type": "string" },
"creative_size": { "type": "string", "pattern": "^\\d+x\\d+$" },
"site_domain": { "type": "string" },
"app_bundle": { "type": "string" },
"device_type": { "type": "string", "enum": ["desktop","mobile","tablet","ctv"] },
"os": { "type": "string", "enum": ["iOS","Android","Windows","macOS","Other"] },
"country": { "type": "string", "pattern": "^[A-Z]{2}$" },
"region": { "type": "string" },
"dma": { "type": "string" },


"impressions": { "type": "integer", "minimum": 0 },
"clicks": { "type": "integer", "minimum": 0 },
"spend": { "type": "number" },
"conversions": { "type": "integer", "minimum": 0 },


"video_starts": { "type": "integer", "minimum": 0 },
"video_25": { "type": "integer", "minimum": 0 },
"video_50": { "type": "integer", "minimum": 0 },
"video_75": { "type": "integer", "minimum": 0 },
"video_100": { "type": "integer", "minimum": 0 },


"measurable_impressions": { "type": "integer", "minimum": 0 },
"viewable_impressions": { "type": "integer", "minimum": 0 },


"revenue": { "type": "number" },
"view_through_conversions": { "type": "integer", "minimum": 0 },
"link_clicks": { "type": "integer", "minimum": 0 },


"viewability_denominator": { "type": "string", "enum": ["measurable","served" ] },
"click_type": { "type": "string", "enum": ["all","link","interaction"] },
"data_quality_note": { "type": "string" }
},
"required": [
"date", "impressions", "clicks", "spend", "conversions"
]
}